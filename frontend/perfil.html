<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gerencie seu perfil no Portal de Not√≠cias - atualize suas informa√ß√µes, prefer√™ncias e configura√ß√µes de conta.">
    <meta name="keywords" content="perfil, conta, configura√ß√µes, portal not√≠cias">
    <meta name="author" content="Portal de Not√≠cias">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="Meu Perfil - Portal de Not√≠cias">
    <meta property="og:description" content="Gerencie seu perfil e configura√ß√µes no Portal de Not√≠cias.">
    <meta property="og:image" content="/assets/img/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="">
    <meta property="twitter:title" content="Meu Perfil - Portal de Not√≠cias">
    <meta property="twitter:description" content="Gerencie seu perfil e configura√ß√µes no Portal de Not√≠cias.">
    <meta property="twitter:image" content="/assets/img/og-image.jpg">
    
    <title>Meu Perfil - Portal de Not√≠cias</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.ico">
    <link rel="apple-touch-icon" href="/assets/img/apple-touch-icon.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ProfilePage",
        "name": "Perfil do Usu√°rio - Portal de Not√≠cias",
        "description": "P√°gina de perfil e configura√ß√µes do usu√°rio",
        "url": ""
    }
    </script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center py-2">
                    <div class="top-info">
                        <span class="date" id="current-date"></span>
                        <span class="weather ms-3" id="weather-info">
                            <i class="fas fa-sun"></i>
                            <span>25¬∞C</span>
                        </span>
                    </div>
                    <div class="top-actions">
                        <div class="social-links me-3">
                            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                            <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        </div>
                        <div class="user-actions">
                            <span class="user-welcome" id="user-welcome">Ol√°, <span id="user-name">Usu√°rio</span>!</span>
                            <button class="btn btn-sm btn-outline-light ms-2" onclick="logout()">
                                <i class="fas fa-sign-out-alt"></i>
                                Sair
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Header -->
        <div class="main-header">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center py-3">
                    <div class="logo">
                        <a href="/">
                            <i class="fas fa-newspaper me-2"></i>
                            <span>Portal Not√≠cias</span>
                        </a>
                    </div>
                    
                    <div class="header-search">
                        <form class="search-form" id="search-form">
                            <div class="search-input-group">
                                <input type="text" class="form-control" placeholder="Buscar not√≠cias..." id="search-input">
                                <button type="submit" class="search-btn">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="header-actions">
                        <button class="theme-toggle me-3" aria-label="Alternar tema">
                            üåô
                        </button>
                        <button class="mobile-menu-toggle d-lg-none">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="main-nav">
            <div class="container">
                <ul class="nav-menu" id="nav-menu">
                    <li><a href="/">In√≠cio</a></li>
                    <li><a href="/categoria.html?cat=politica">Pol√≠tica</a></li>
                    <li><a href="/categoria.html?cat=economia">Economia</a></li>
                    <li><a href="/categoria.html?cat=esportes">Esportes</a></li>
                    <li><a href="/categoria.html?cat=tecnologia">Tecnologia</a></li>
                    <li><a href="/categoria.html?cat=saude">Sa√∫de</a></li>
                    <li><a href="/categoria.html?cat=cultura">Cultura</a></li>
                    <li><a href="/categoria.html?cat=mundo">Mundo</a></li>
                </ul>
            </div>
        </nav>
    </header>
    
    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="row">
                <!-- Profile Content -->
                <div class="col-lg-8">
                    <!-- Profile Header -->
                    <div class="profile-header mb-4">
                        <div class="profile-cover">
                            <div class="profile-avatar-container">
                                <div class="profile-avatar" id="profile-avatar">
                                    <img src="/assets/img/default-avatar.jpg" alt="Avatar" id="avatar-img">
                                    <div class="avatar-upload" id="avatar-upload">
                                        <i class="fas fa-camera"></i>
                                        <input type="file" id="avatar-input" accept="image/*" style="display: none;">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="profile-info">
                            <h1 class="profile-name" id="profile-name">Nome do Usu√°rio</h1>
                            <p class="profile-bio" id="profile-bio">Biografia do usu√°rio...</p>
                            <div class="profile-stats">
                                <div class="stat-item">
                                    <span class="stat-number" id="comments-count">0</span>
                                    <span class="stat-label">Coment√°rios</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="likes-count">0</span>
                                    <span class="stat-label">Curtidas</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="member-since">2024</span>
                                    <span class="stat-label">Membro desde</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Profile Tabs -->
                    <div class="profile-tabs">
                        <ul class="nav nav-tabs" id="profile-tabs">
                            <li class="nav-item">
                                <a class="nav-link active" data-tab="personal" href="#">
                                    <i class="fas fa-user me-1"></i>
                                    Dados Pessoais
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-tab="preferences" href="#">
                                    <i class="fas fa-heart me-1"></i>
                                    Prefer√™ncias
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-tab="security" href="#">
                                    <i class="fas fa-shield-alt me-1"></i>
                                    Seguran√ßa
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-tab="activity" href="#">
                                    <i class="fas fa-chart-line me-1"></i>
                                    Atividade
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-tab="notifications" href="#">
                                    <i class="fas fa-bell me-1"></i>
                                    Notifica√ß√µes
                                </a>
                            </li>
                        </ul>
                        
                        <!-- Tab Content -->
                        <div class="tab-content mt-4">
                            <!-- Personal Data Tab -->
                            <div class="tab-pane active" id="personal-tab">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <i class="fas fa-user me-2"></i>
                                            Informa√ß√µes Pessoais
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="personal-form">
                                            <div class="form-group mb-3">
                                                <label for="nome" class="form-label">Nome Completo *</label>
                                                <input type="text" class="form-control" id="nome" name="nome" required placeholder="Digite seu nome completo">
                                            </div>
                                            
                                            <div class="form-group mb-3">
                                                <label for="email" class="form-label">E-mail *</label>
                                                <input type="email" class="form-control" id="email" name="email" required readonly>
                                                <div class="form-text">Para alterar o e-mail, entre em contato conosco.</div>
                                            </div>
                                            
                                            <div class="form-group mb-3">
                                                <label for="bio" class="form-label">Biografia</label>
                                                <textarea class="form-control" id="bio" name="bio" rows="3" maxlength="500" placeholder="Conte um pouco sobre voc√™..."></textarea>
                                                <div class="form-text">M√°ximo de 500 caracteres. <span id="bio-count">0/500</span></div>
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label for="data-nascimento" class="form-label">Data de Nascimento</label>
                                                        <input type="date" class="form-control" id="data-nascimento" name="data_nascimento">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label for="genero" class="form-label">G√™nero</label>
                                                        <select class="form-control" id="genero" name="genero">
                                                            <option value="">Selecione...</option>
                                                            <option value="masculino">Masculino</option>
                                                            <option value="feminino">Feminino</option>
                                                            <option value="outro">Outro</option>
                                                            <option value="prefiro-nao-informar">Prefiro n√£o informar</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label for="telefone" class="form-label">Telefone</label>
                                                        <input type="tel" class="form-control" id="telefone" name="telefone" placeholder="(11) 99999-9999">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label for="cidade" class="form-label">Cidade</label>
                                                        <input type="text" class="form-control" id="cidade" name="cidade">
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-1"></i>
                                                Salvar Altera√ß√µes
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Preferences Tab -->
                            <div class="tab-pane" id="preferences-tab">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <i class="fas fa-heart me-2"></i>
                                            Prefer√™ncias de Conte√∫do
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="preferences-form">
                                            <div class="form-group mb-4">
                                                <label class="form-label">Categorias de Interesse</label>
                                                <div class="preferences-grid">
                                                    <div class="form-check">
                                                        <input type="checkbox" class="form-check-input" id="pref-politica" name="preferencias[]" value="politica">
                                                        <label class="form-check-label" for="pref-politica">Pol√≠tica</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input type="checkbox" class="form-check-input" id="pref-economia" name="preferencias[]" value="economia">
                                                        <label class="form-check-label" for="pref-economia">Economia</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input type="checkbox" class="form-check-input" id="pref-esportes" name="preferencias[]" value="esportes">
                                                        <label class="form-check-label" for="pref-esportes">Esportes</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input type="checkbox" class="form-check-input" id="pref-tecnologia" name="preferencias[]" value="tecnologia">
                                                        <label class="form-check-label" for="pref-tecnologia">Tecnologia</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input type="checkbox" class="form-check-input" id="pref-saude" name="preferencias[]" value="saude">
                                                        <label class="form-check-label" for="pref-saude">Sa√∫de</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input type="checkbox" class="form-check-input" id="pref-cultura" name="preferencias[]" value="cultura">
                                                        <label class="form-check-label" for="pref-cultura">Cultura</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input type="checkbox" class="form-check-input" id="pref-mundo" name="preferencias[]" value="mundo">
                                                        <label class="form-check-label" for="pref-mundo">Mundo</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input type="checkbox" class="form-check-input" id="pref-ciencia" name="preferencias[]" value="ciencia">
                                                        <label class="form-check-label" for="pref-ciencia">Ci√™ncia</label>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="form-group mb-3">
                                                <label class="form-label">Configura√ß√µes de Exibi√ß√£o</label>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input" id="show-images" name="show_images" checked>
                                                    <label class="form-check-label" for="show-images">
                                                        Exibir imagens nas not√≠cias
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input" id="auto-play-videos" name="auto_play_videos">
                                                    <label class="form-check-label" for="auto-play-videos">
                                                        Reproduzir v√≠deos automaticamente
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input" id="dark-mode" name="dark_mode">
                                                    <label class="form-check-label" for="dark-mode">
                                                        Modo escuro
                                                    </label>
                                                </div>
                                            </div>
                                            
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-1"></i>
                                                Salvar Prefer√™ncias
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Security Tab -->
                            <div class="tab-pane" id="security-tab">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <i class="fas fa-shield-alt me-2"></i>
                                            Seguran√ßa da Conta
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <!-- Change Password -->
                                        <div class="security-section mb-4">
                                            <h6>Alterar Senha</h6>
                                            <form id="password-form">
                                                <div class="form-group mb-3">
                                                    <label for="current-password" class="form-label">Senha Atual *</label>
                                                    <div class="password-input">
                                                        <input type="password" class="form-control" id="current-password" name="current_password" required>
                                                        <button type="button" class="password-toggle">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <div class="form-group mb-3">
                                                    <label for="new-password" class="form-label">Nova Senha *</label>
                                                    <div class="password-input">
                                                        <input type="password" class="form-control" id="new-password" name="new_password" required>
                                                        <button type="button" class="password-toggle">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                    </div>
                                                    <div class="password-strength" id="new-password-strength" style="display: none;">
                                                        <div class="strength-bar">
                                                            <div class="strength-fill"></div>
                                                        </div>
                                                        <div class="strength-text"></div>
                                                    </div>
                                                </div>
                                                
                                                <div class="form-group mb-3">
                                                    <label for="confirm-password" class="form-label">Confirmar Nova Senha *</label>
                                                    <div class="password-input">
                                                        <input type="password" class="form-control" id="confirm-password" name="confirm_password" required>
                                                        <button type="button" class="password-toggle">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <button type="submit" class="btn btn-warning">
                                                    <i class="fas fa-key me-1"></i>
                                                    Alterar Senha
                                                </button>
                                            </form>
                                        </div>
                                        
                                        <!-- Two Factor Authentication -->
                                        <div class="security-section mb-4">
                                            <h6>Autentica√ß√£o de Dois Fatores</h6>
                                            <p class="text-muted">Adicione uma camada extra de seguran√ßa √† sua conta.</p>
                                            <div class="d-flex align-items-center">
                                                <div class="form-check form-switch me-3">
                                                    <input class="form-check-input" type="checkbox" id="two-factor" name="two_factor">
                                                    <label class="form-check-label" for="two-factor">
                                                        Ativar 2FA
                                                    </label>
                                                </div>
                                                <button type="button" class="btn btn-outline-primary btn-sm" id="setup-2fa">
                                                    <i class="fas fa-mobile-alt me-1"></i>
                                                    Configurar
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <!-- Login Sessions -->
                                        <div class="security-section">
                                            <h6>Sess√µes Ativas</h6>
                                            <p class="text-muted">Gerencie onde voc√™ est√° logado.</p>
                                            <div class="sessions-list" id="sessions-list">
                                                <!-- Sessions will be loaded here -->
                                            </div>
                                            <button type="button" class="btn btn-outline-danger btn-sm" id="logout-all">
                                                <i class="fas fa-sign-out-alt me-1"></i>
                                                Sair de Todos os Dispositivos
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Activity Tab -->
                            <div class="tab-pane" id="activity-tab">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <i class="fas fa-chart-line me-2"></i>
                                            Sua Atividade
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <!-- Activity Stats -->
                                        <div class="activity-stats mb-4">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <div class="stat-card">
                                                        <div class="stat-icon">
                                                            <i class="fas fa-eye text-primary"></i>
                                                        </div>
                                                        <div class="stat-info">
                                                            <h4 id="total-views">0</h4>
                                                            <p>Not√≠cias Lidas</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="stat-card">
                                                        <div class="stat-icon">
                                                            <i class="fas fa-comments text-success"></i>
                                                        </div>
                                                        <div class="stat-info">
                                                            <h4 id="total-comments">0</h4>
                                                            <p>Coment√°rios</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="stat-card">
                                                        <div class="stat-icon">
                                                            <i class="fas fa-heart text-danger"></i>
                                                        </div>
                                                        <div class="stat-info">
                                                            <h4 id="total-likes">0</h4>
                                                            <p>Curtidas Dadas</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="stat-card">
                                                        <div class="stat-icon">
                                                            <i class="fas fa-share text-info"></i>
                                                        </div>
                                                        <div class="stat-info">
                                                            <h4 id="total-shares">0</h4>
                                                            <p>Compartilhamentos</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Recent Activity -->
                                        <div class="recent-activity">
                                            <h6>Atividade Recente</h6>
                                            <div class="activity-list" id="activity-list">
                                                <!-- Activity items will be loaded here -->
                                            </div>
                                            <button type="button" class="btn btn-outline-primary btn-sm" id="load-more-activity">
                                                <i class="fas fa-plus me-1"></i>
                                                Carregar Mais
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Notifications Tab -->
                            <div class="tab-pane" id="notifications-tab">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <i class="fas fa-bell me-2"></i>
                                            Configura√ß√µes de Notifica√ß√£o
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="notifications-form">
                                            <!-- Email Notifications -->
                                            <div class="notification-section mb-4">
                                                <h6><i class="fas fa-envelope me-2"></i>Notifica√ß√µes por E-mail</h6>
                                                <p class="text-muted small mb-3">Escolha quais tipos de e-mail voc√™ deseja receber</p>
                                                
                                                <div class="form-check mb-2">
                                                    <input type="checkbox" class="form-check-input" id="email-newsletter" name="email_newsletter" checked>
                                                    <label class="form-check-label" for="email-newsletter">
                                                        <strong>Newsletter</strong>
                                                        <small class="d-block text-muted">Resumo das principais not√≠cias</small>
                                                    </label>
                                                </div>
                                                <div class="form-check mb-2">
                                                    <input type="checkbox" class="form-check-input" id="email-breaking" name="email_breaking">
                                                    <label class="form-check-label" for="email-breaking">
                                                        <strong>Not√≠cias Urgentes</strong>
                                                        <small class="d-block text-muted">Alertas imediatos sobre not√≠cias importantes</small>
                                                    </label>
                                                </div>
                                                <div class="form-check mb-2">
                                                    <input type="checkbox" class="form-check-input" id="email-comments" name="email_comments">
                                                    <label class="form-check-label" for="email-comments">
                                                        <strong>Respostas aos Coment√°rios</strong>
                                                        <small class="d-block text-muted">Quando algu√©m responder seus coment√°rios</small>
                                                    </label>
                                                </div>
                                                <div class="form-check mb-2">
                                                    <input type="checkbox" class="form-check-input" id="email-marketing" name="email_marketing">
                                                    <label class="form-check-label" for="email-marketing">
                                                        <strong>Ofertas e Promo√ß√µes</strong>
                                                        <small class="d-block text-muted">Descontos e ofertas especiais</small>
                                                    </label>
                                                </div>
                                            </div>
                                            
                                            <!-- Push Notifications -->
                                            <div class="notification-section mb-4">
                                                <h6><i class="fas fa-mobile-alt me-2"></i>Notifica√ß√µes Push</h6>
                                                <p class="text-muted small mb-3">Receba notifica√ß√µes instant√¢neas no seu dispositivo</p>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input" id="push-breaking" name="push_breaking">
                                                    <label class="form-check-label" for="push-breaking">
                                                        <strong>Not√≠cias Urgentes</strong>
                                                        <small class="d-block text-muted">Alertas imediatos sobre not√≠cias importantes</small>
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input" id="push-interests" name="push_interests">
                                                    <label class="form-check-label" for="push-interests">
                                                        <strong>Not√≠cias dos Meus Interesses</strong>
                                                        <small class="d-block text-muted">Conte√∫do baseado nas suas categorias favoritas</small>
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input" id="push-comments" name="push_comments">
                                                    <label class="form-check-label" for="push-comments">
                                                        <strong>Respostas aos Coment√°rios</strong>
                                                        <small class="d-block text-muted">Seja notificado quando algu√©m responder seus coment√°rios</small>
                                                    </label>
                                                </div>
                                            </div>
                                            
                                            <!-- Frequency Settings -->
                                            <div class="notification-section mb-4">
                                                <h6><i class="fas fa-clock me-2"></i>Frequ√™ncia de Notifica√ß√µes</h6>
                                                <p class="text-muted small mb-3">Defina com que frequ√™ncia deseja receber as notifica√ß√µes</p>
                                                <div class="form-group">
                                                    <label for="notification-frequency" class="form-label"><strong>Frequ√™ncia da Newsletter</strong></label>
                                                    <select class="form-control" id="notification-frequency" name="notification_frequency">
                                                        <option value="imediato">Imediato - Receba assim que publicado</option>
                                                        <option value="diario" selected>Di√°rio - Resumo di√°rio das principais not√≠cias</option>
                                                        <option value="semanal">Semanal - Resumo semanal dos destaques</option>
                                                    </select>
                                                    <small class="text-muted">Esta configura√ß√£o afeta apenas a newsletter por e-mail</small>
                                                </div>
                                            </div>
                                            
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-1"></i>
                                                Salvar Configura√ß√µes
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar -->
                <div class="col-lg-4">
                    <!-- Account Actions -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-cog me-2"></i>
                                A√ß√µes da Conta
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button type="button" class="btn btn-outline-primary" id="export-data">
                                    <i class="fas fa-download me-1"></i>
                                    Exportar Meus Dados
                                </button>
                                <button type="button" class="btn btn-outline-warning" id="deactivate-account">
                                    <i class="fas fa-pause me-1"></i>
                                    Desativar Conta
                                </button>
                                <button type="button" class="btn btn-outline-danger" id="delete-account">
                                    <i class="fas fa-trash me-1"></i>
                                    Excluir Conta
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Comments -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-comments me-2"></i>
                                Meus Coment√°rios Recentes
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="recent-comments" id="recent-comments">
                                <!-- Comments will be loaded here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Favorite Categories -->
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-star me-2"></i>
                                Categorias Favoritas
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="favorite-categories" id="favorite-categories">
                                <!-- Categories will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="footer-section">
                        <h5>Portal Not√≠cias</h5>
                        <p>Seu portal de not√≠cias confi√°vel, trazendo informa√ß√µes precisas e atualizadas 24 horas por dia.</p>
                        <div class="social-links">
                            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                            <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                            <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <div class="footer-section">
                        <h6>Categorias</h6>
                        <ul class="footer-links">
                            <li><a href="/categoria.html?cat=politica">Pol√≠tica</a></li>
                            <li><a href="/categoria.html?cat=economia">Economia</a></li>
                            <li><a href="/categoria.html?cat=esportes">Esportes</a></li>
                            <li><a href="/categoria.html?cat=tecnologia">Tecnologia</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <div class="footer-section">
                        <h6>Institucional</h6>
                        <ul class="footer-links">
                            <li><a href="/sobre">Sobre N√≥s</a></li>
                            <li><a href="/contato">Contato</a></li>
                            <li><a href="/equipe">Nossa Equipe</a></li>
                            <li><a href="/trabalhe-conosco">Trabalhe Conosco</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <div class="footer-section">
                        <h6>Suporte</h6>
                        <ul class="footer-links">
                            <li><a href="/ajuda">Central de Ajuda</a></li>
                            <li><a href="/termos">Termos de Uso</a></li>
                            <li><a href="/privacidade">Pol√≠tica de Privacidade</a></li>
                            <li><a href="/cookies">Pol√≠tica de Cookies</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <div class="footer-section">
                        <h6>Conecte-se</h6>
                        <ul class="footer-links">
                            <li><a href="/newsletter">Newsletter</a></li>
                            <li><a href="/rss">Feed RSS</a></li>
                            <li><a href="/app">Aplicativo Mobile</a></li>
                            <li><a href="/notificacoes">Notifica√ß√µes Push</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2024 Portal de Not√≠cias. Todos os direitos reservados.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Desenvolvido com ‚ù§Ô∏è para informar melhor</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Scroll to Top -->
    <button class="scroll-to-top" id="scroll-to-top" aria-label="Voltar ao topo">
        <i class="fas fa-chevron-up"></i>
    </button>
    
    <!-- Scripts -->
    <script src="/assets/js/main.js"></script>
    
    <!-- Profile Specific Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initProfilePage();
        });
        
        function initProfilePage() {
            // Verifica se est√° logado
            if (!isLoggedIn()) {
                window.location.href = '/login.html';
                return;
            }
            
            loadUserData();
            setupEventListeners();
            loadUserActivity();
            loadRecentComments();
            loadFavoriteCategories();
        }
        
        function setupEventListeners() {
            // Tab navigation
            document.querySelectorAll('[data-tab]').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    switchTab(this.dataset.tab);
                });
            });
            
            // Form submissions
            document.getElementById('personal-form').addEventListener('submit', handlePersonalUpdate);
            document.getElementById('preferences-form').addEventListener('submit', handlePreferencesUpdate);
            document.getElementById('password-form').addEventListener('submit', handlePasswordChange);
            document.getElementById('notifications-form').addEventListener('submit', handleNotificationsUpdate);
            
            // Avatar upload
            document.getElementById('avatar-upload').addEventListener('click', () => {
                document.getElementById('avatar-input').click();
            });
            document.getElementById('avatar-input').addEventListener('change', handleAvatarUpload);
            
            // Password toggles
            document.querySelectorAll('.password-toggle').forEach(btn => {
                btn.addEventListener('click', function() {
                    togglePassword(this);
                });
            });
            
            // Bio character count
            document.getElementById('bio').addEventListener('input', updateBioCount);
            
            // Password strength
            document.getElementById('new-password').addEventListener('input', checkPasswordStrength);
            
            // Account actions
            document.getElementById('export-data').addEventListener('click', exportUserData);
            document.getElementById('deactivate-account').addEventListener('click', deactivateAccount);
            document.getElementById('delete-account').addEventListener('click', deleteAccount);
            document.getElementById('logout-all').addEventListener('click', logoutAllSessions);
            
            // Load more activity
            document.getElementById('load-more-activity').addEventListener('click', loadMoreActivity);
        }
        
        async function loadUserData() {
            try {
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=profile', {
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    populateUserData(result.data);
                } else {
                    showError('Erro ao carregar dados do usu√°rio.');
                }
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        function populateUserData(userData) {
            // Header info
            document.getElementById('user-name').textContent = userData.nome;
            document.getElementById('profile-name').textContent = userData.nome;
            document.getElementById('profile-bio').textContent = userData.bio || 'Nenhuma biografia adicionada.';
            
            // Avatar
            if (userData.foto_perfil) {
                document.getElementById('avatar-img').src = userData.foto_perfil;
            }
            
            // Stats
            document.getElementById('comments-count').textContent = userData.total_comentarios || 0;
            document.getElementById('likes-count').textContent = userData.total_curtidas || 0;
            document.getElementById('member-since').textContent = new Date(userData.data_cadastro).getFullYear();
            
            // Personal form
            document.getElementById('nome').value = userData.nome || '';
            document.getElementById('email').value = userData.email || '';
            document.getElementById('bio').value = userData.bio || '';
            document.getElementById('data-nascimento').value = userData.data_nascimento || '';
            document.getElementById('genero').value = userData.genero || '';
            document.getElementById('telefone').value = userData.telefone || '';
            document.getElementById('cidade').value = userData.cidade || '';
            
            // Preferences
            if (userData.preferencias) {
                userData.preferencias.forEach(pref => {
                    const checkbox = document.getElementById(`pref-${pref}`);
                    if (checkbox) checkbox.checked = true;
                });
            }
            
            // Display settings
            document.getElementById('show-images').checked = userData.show_images === true;
            document.getElementById('auto-play-videos').checked = userData.auto_play_videos === true;
            document.getElementById('dark-mode').checked = userData.dark_mode === true;
            
            // Notifications
            document.getElementById('email-newsletter').checked = userData.email_newsletter === true;
            document.getElementById('email-breaking').checked = userData.email_breaking === true;
            document.getElementById('email-comments').checked = userData.email_comments === true;
            document.getElementById('email-marketing').checked = userData.email_marketing === true;
            document.getElementById('push-breaking').checked = userData.push_breaking === true;
            document.getElementById('push-interests').checked = userData.push_interests === true;
            document.getElementById('push-comments').checked = userData.push_comments === true;
            document.getElementById('notification-frequency').value = userData.notification_frequency || 'diario';
            
            updateBioCount();
        }
        
        function switchTab(tabName) {
            // Update tab navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Load specific tab data
            if (tabName === 'security') {
                loadActiveSessions();
            }
        }
        
        async function handlePersonalUpdate(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            // Validar nome completo
            const nomeCompleto = data.nome.trim();
            if (!nomeCompleto) {
                showError('Por favor, digite seu nome completo.');
                return;
            }
            
            const partesNome = nomeCompleto.split(' ').filter(parte => parte.length > 0);
            if (partesNome.length < 2) {
                showError('Por favor, digite seu nome e sobrenome.');
                return;
            }
            
            try {
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=profile', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + getAuthToken()
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.sucesso) {
                    showSuccess('Dados pessoais atualizados com sucesso!');
                    // Update header info
                    document.getElementById('user-name').textContent = data.nome;
                    document.getElementById('profile-name').textContent = data.nome;
                    document.getElementById('profile-bio').textContent = data.bio || 'Nenhuma biografia adicionada.';
                } else {
                    showError(result.mensagem || 'Erro ao atualizar dados.');
                }
            } catch (error) {
                console.error('Erro ao atualizar:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        async function handlePreferencesUpdate(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            // Collect preferences
            const preferencias = Array.from(e.target.querySelectorAll('input[name="preferencias[]"]:checked'))
                .map(cb => cb.value);
            data.preferencias = preferencias;
            
            try {
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=preferences', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + getAuthToken()
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Prefer√™ncias atualizadas com sucesso!');
                    
                    // Apply dark mode if changed
                    if (data.dark_mode) {
                        document.body.classList.add('dark-mode');
                    } else {
                        document.body.classList.remove('dark-mode');
                    }
                } else {
                    showError(result.message || 'Erro ao atualizar prefer√™ncias.');
                }
            } catch (error) {
                console.error('Erro ao atualizar:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        async function handlePasswordChange(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            if (data.new_password !== data.confirm_password) {
                showError('As senhas n√£o coincidem.');
                return;
            }
            
            try {
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=change-password', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + getAuthToken()
                    },
                    body: JSON.stringify({
                        current_password: data.current_password,
                        new_password: data.new_password
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Senha alterada com sucesso!');
                    e.target.reset();
                } else {
                    showError(result.message || 'Erro ao alterar senha.');
                }
            } catch (error) {
                console.error('Erro ao alterar senha:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        async function handleNotificationsUpdate(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            try {
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=notifications', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + getAuthToken()
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Configura√ß√µes de notifica√ß√£o atualizadas!');
                } else {
                    showError(result.message || 'Erro ao atualizar configura√ß√µes.');
                }
            } catch (error) {
                console.error('Erro ao atualizar:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        async function handleAvatarUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            // Validate file type
            if (!file.type.startsWith('image/')) {
                showError('Por favor, selecione uma imagem.');
                return;
            }
            
            // Show loading state
            const avatarUpload = document.getElementById('avatar-upload');
            const originalContent = avatarUpload.innerHTML;
            avatarUpload.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processando...';
            
            try {
                // Process and resize image automatically
                const base64 = await processImage(file, 150, 150, 500);
                
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=upload_avatar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + getAuthToken()
                    },
                    body: JSON.stringify({
                        image: base64
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    document.getElementById('avatar-img').src = result.avatar_url;
                    showSuccess('Avatar atualizado com sucesso!');
                } else {
                    showError(result.message || 'Erro ao fazer upload do avatar.');
                }
            } catch (error) {
                console.error('Erro no upload:', error);
                showError('Erro de conex√£o.');
            } finally {
                // Restore original content
                avatarUpload.innerHTML = originalContent;
            }
        }
        
        // Helper function to process and resize image with automatic compression
        function processImage(file, maxWidth = 150, maxHeight = 150, targetSizeKB = 500) {
            return new Promise((resolve, reject) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    // Calculate new dimensions maintaining aspect ratio
                    let { width, height } = img;
                    
                    if (width > height) {
                        if (width > maxWidth) {
                            height = (height * maxWidth) / width;
                            width = maxWidth;
                        }
                    } else {
                        if (height > maxHeight) {
                            width = (width * maxHeight) / height;
                            height = maxHeight;
                        }
                    }
                    
                    // Set canvas dimensions
                    canvas.width = width;
                    canvas.height = height;
                    
                    // Draw image
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // Function to compress with automatic quality adjustment
                    const compressImage = (quality) => {
                        return new Promise((resolveCompress) => {
                            canvas.toBlob((blob) => {
                                if (blob) {
                                    const sizeKB = blob.size / 1024;
                                    
                                    // If size is acceptable or quality is too low, use this version
                                    if (sizeKB <= targetSizeKB || quality <= 0.1) {
                                        const reader = new FileReader();
                                        reader.onload = () => resolveCompress(reader.result);
                                        reader.readAsDataURL(blob);
                                    } else {
                                        // Try with lower quality
                                        compressImage(quality - 0.1).then(resolveCompress);
                                    }
                                } else {
                                    reject(new Error('Erro ao processar imagem'));
                                }
                            }, 'image/jpeg', quality);
                        });
                    };
                    
                    // Start compression with quality 0.8
                    compressImage(0.8).then(resolve).catch(reject);
                };
                
                img.onerror = () => reject(new Error('Erro ao carregar imagem'));
                
                // Load image
                const reader = new FileReader();
                reader.onload = (e) => img.src = e.target.result;
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }
        
        // Helper function to convert file to base64 (legacy)
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }
        
        async function loadUserActivity() {
            try {
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=activity', {
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                const result = await response.json();
                
                if (result.sucesso) {
                    // Update stats
                    document.getElementById('total-views').textContent = result.data.stats.total_views || 0;
                    document.getElementById('total-comments').textContent = result.data.stats.total_comments || 0;
                    document.getElementById('total-likes').textContent = result.data.stats.total_likes || 0;
                    document.getElementById('total-shares').textContent = result.data.stats.total_shares || 0;
                    
                    // Load activity list
                    renderActivityList(result.data.activities || []);
                }
            } catch (error) {
                console.error('Erro ao carregar atividade:', error);
            }
        }
        
        function renderActivityList(activities) {
            const container = document.getElementById('activity-list');
            
            if (activities.length === 0) {
                container.innerHTML = '<p class="text-muted">Nenhuma atividade recente.</p>';
                return;
            }
            
            container.innerHTML = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-${getActivityIcon(activity.tipo)}"></i>
                    </div>
                    <div class="activity-content">
                        <p class="activity-text">${getActivityText(activity)}</p>
                        <small class="activity-time text-muted">${formatDate(activity.data_atividade)}</small>
                    </div>
                </div>
            `).join('');
        }
        
        function getActivityIcon(tipo) {
            const icons = {
                'view': 'eye',
                'comment': 'comment',
                'like': 'heart',
                'share': 'share'
            };
            return icons[tipo] || 'circle';
        }
        
        function getActivityText(activity) {
            const texts = {
                'view': `Leu a not√≠cia "${activity.titulo_noticia}"`,
                'comment': `Comentou na not√≠cia "${activity.titulo_noticia}"`,
                'like': `Curtiu a not√≠cia "${activity.titulo_noticia}"`,
                'share': `Compartilhou a not√≠cia "${activity.titulo_noticia}"`
            };
            return texts[activity.tipo] || 'Atividade desconhecida';
        }
        
        async function loadRecentComments() {
            try {
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=comments', {
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    renderRecentComments(result.data || []);
                }
            } catch (error) {
                console.error('Erro ao carregar coment√°rios:', error);
            }
        }
        
        function renderRecentComments(comments) {
            const container = document.getElementById('recent-comments');
            
            if (comments.length === 0) {
                container.innerHTML = '<p class="text-muted">Nenhum coment√°rio recente.</p>';
                return;
            }
            
            container.innerHTML = comments.slice(0, 5).map(comment => `
                <div class="comment-item mb-3">
                    <p class="comment-text">${comment.conteudo.substring(0, 100)}${comment.conteudo.length > 100 ? '...' : ''}</p>
                    <small class="text-muted">
                        Em: <a href="/noticia.html?id=${comment.noticia_id}">${comment.titulo_noticia}</a><br>
                        ${formatDate(comment.data_comentario)}
                    </small>
                </div>
            `).join('');
        }
        
        async function loadFavoriteCategories() {
            try {
                const response = await fetch('http://localhost:8001/controllers/AuthController.php?action=favorite-categories', {
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    renderFavoriteCategories(result.data || []);
                }
            } catch (error) {
                console.error('Erro ao carregar categorias:', error);
            }
        }
        
        function renderFavoriteCategories(categories) {
            const container = document.getElementById('favorite-categories');
            
            if (categories.length === 0) {
                container.innerHTML = '<p class="text-muted">Nenhuma categoria favorita.</p>';
                return;
            }
            
            container.innerHTML = categories.map(category => `
                <div class="category-item mb-2">
                    <a href="/categoria.html?cat=${category.slug}" class="d-flex justify-content-between align-items-center">
                        <span>${category.nome}</span>
                        <span class="badge bg-primary">${category.total_leituras}</span>
                    </a>
                </div>
            `).join('');
        }
        
        function updateBioCount() {
            const bio = document.getElementById('bio');
            const count = document.getElementById('bio-count');
            count.textContent = `${bio.value.length}/500`;
        }
        
        function togglePassword(button) {
            const input = button.parentElement.querySelector('input');
            const icon = button.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
        
        function checkPasswordStrength() {
            const password = document.getElementById('new-password').value;
            const strengthContainer = document.getElementById('new-password-strength');
            const strengthFill = strengthContainer.querySelector('.strength-fill');
            const strengthText = strengthContainer.querySelector('.strength-text');
            
            if (password.length === 0) {
                strengthContainer.style.display = 'none';
                return;
            }
            
            strengthContainer.style.display = 'block';
            
            let strength = 0;
            let feedback = [];
            
            // Length check
            if (password.length >= 8) strength += 20;
            else feedback.push('pelo menos 8 caracteres');
            
            // Uppercase check
            if (/[A-Z]/.test(password)) strength += 20;
            else feedback.push('uma letra mai√∫scula');
            
            // Lowercase check
            if (/[a-z]/.test(password)) strength += 20;
            else feedback.push('uma letra min√∫scula');
            
            // Number check
            if (/\d/.test(password)) strength += 20;
            else feedback.push('um n√∫mero');
            
            // Special character check
            if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength += 20;
            else feedback.push('um caractere especial');
            
            // Update visual feedback
            strengthFill.style.width = strength + '%';
            
            if (strength < 40) {
                strengthFill.className = 'strength-fill weak';
                strengthText.textContent = 'Fraca - Adicione: ' + feedback.join(', ');
            } else if (strength < 80) {
                strengthFill.className = 'strength-fill medium';
                strengthText.textContent = 'M√©dia - Adicione: ' + feedback.join(', ');
            } else {
                strengthFill.className = 'strength-fill strong';
                strengthText.textContent = 'Forte';
            }
        }
        
        async function loadActiveSessions() {
            try {
                const response = await fetch('/backend/auth/sessions', {
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    renderActiveSessions(result.data || []);
                }
            } catch (error) {
                console.error('Erro ao carregar sess√µes:', error);
            }
        }
        
        function renderActiveSessions(sessions) {
            const container = document.getElementById('sessions-list');
            
            if (sessions.length === 0) {
                container.innerHTML = '<p class="text-muted">Nenhuma sess√£o ativa.</p>';
                return;
            }
            
            container.innerHTML = sessions.map(session => `
                <div class="session-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                    <div class="session-info">
                        <div class="session-device">
                            <i class="fas fa-${getDeviceIcon(session.device_type)} me-2"></i>
                            <strong>${session.device_name || 'Dispositivo Desconhecido'}</strong>
                            ${session.is_current ? '<span class="badge bg-success ms-2">Atual</span>' : ''}
                        </div>
                        <small class="text-muted">
                            ${session.ip_address} ‚Ä¢ ${session.location || 'Localiza√ß√£o desconhecida'}<br>
                            √öltimo acesso: ${formatDate(session.ultimo_acesso)}
                        </small>
                    </div>
                    ${!session.is_current ? `
                        <button type="button" class="btn btn-outline-danger btn-sm" onclick="terminateSession('${session.id}')">
                            <i class="fas fa-times"></i>
                        </button>
                    ` : ''}
                </div>
            `).join('');
        }
        
        function getDeviceIcon(deviceType) {
            const icons = {
                'desktop': 'desktop',
                'mobile': 'mobile-alt',
                'tablet': 'tablet-alt'
            };
            return icons[deviceType] || 'laptop';
        }
        
        async function terminateSession(sessionId) {
            if (!confirm('Tem certeza que deseja encerrar esta sess√£o?')) {
                return;
            }
            
            try {
                const response = await fetch(`/backend/auth/sessions/${sessionId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Sess√£o encerrada com sucesso!');
                    loadActiveSessions();
                } else {
                    showError(result.message || 'Erro ao encerrar sess√£o.');
                }
            } catch (error) {
                console.error('Erro ao encerrar sess√£o:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        async function logoutAllSessions() {
            if (!confirm('Tem certeza que deseja sair de todos os dispositivos? Voc√™ precisar√° fazer login novamente.')) {
                return;
            }
            
            try {
                const response = await fetch('http://localhost:8001/auth/logout-all', {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Deslogado de todos os dispositivos!');
                    setTimeout(() => {
                        logout();
                    }, 2000);
                } else {
                    showError(result.message || 'Erro ao deslogar.');
                }
            } catch (error) {
                console.error('Erro ao deslogar:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        async function exportUserData() {
            try {
                const response = await fetch('http://localhost:8001/auth/export-data', {
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'meus-dados-portal-noticias.json';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(url);
                    
                    showSuccess('Dados exportados com sucesso!');
                } else {
                    showError('Erro ao exportar dados.');
                }
            } catch (error) {
                console.error('Erro ao exportar:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        async function deactivateAccount() {
            const reason = prompt('Por favor, informe o motivo da desativa√ß√£o (opcional):');
            
            if (!confirm('Tem certeza que deseja desativar sua conta? Voc√™ poder√° reativ√°-la fazendo login novamente.')) {
                return;
            }
            
            try {
                const response = await fetch('http://localhost:8001/auth/deactivate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + getAuthToken()
                    },
                    body: JSON.stringify({ reason })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Conta desativada com sucesso!');
                    setTimeout(() => {
                        logout();
                    }, 2000);
                } else {
                    showError(result.message || 'Erro ao desativar conta.');
                }
            } catch (error) {
                console.error('Erro ao desativar:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        async function deleteAccount() {
            const password = prompt('Para excluir sua conta, digite sua senha:');
            if (!password) return;
            
            if (!confirm('ATEN√á√ÉO: Esta a√ß√£o √© irrevers√≠vel! Todos os seus dados ser√£o permanentemente exclu√≠dos. Tem certeza que deseja continuar?')) {
                return;
            }
            
            try {
                const response = await fetch('http://localhost:8001/auth/delete-account', {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + getAuthToken()
                    },
                    body: JSON.stringify({ password })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Conta exclu√≠da com sucesso!');
                    setTimeout(() => {
                        localStorage.clear();
                        sessionStorage.clear();
                        window.location.href = '/';
                    }, 2000);
                } else {
                    showError(result.message || 'Erro ao excluir conta.');
                }
            } catch (error) {
                console.error('Erro ao excluir:', error);
                showError('Erro de conex√£o.');
            }
        }
        
        let activityPage = 1;
        async function loadMoreActivity() {
            activityPage++;
            
            try {
                const response = await fetch(`http://localhost:8001/auth/activity?page=${activityPage}`, {
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    }
                });
                
                const result = await response.json();
                
                if (result.sucesso && result.data.activities.length > 0) {
                    const container = document.getElementById('activity-list');
                    const newActivities = result.data.activities.map(activity => `
                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-${getActivityIcon(activity.tipo)}"></i>
                            </div>
                            <div class="activity-content">
                                <p class="activity-text">${getActivityText(activity)}</p>
                                <small class="activity-time text-muted">${formatDate(activity.data_atividade)}</small>
                            </div>
                        </div>
                    `).join('');
                    
                    container.innerHTML += newActivities;
                    
                    if (result.data.activities.length < 10) {
                        document.getElementById('load-more-activity').style.display = 'none';
                    }
                } else {
                    document.getElementById('load-more-activity').style.display = 'none';
                }
            } catch (error) {
                console.error('Erro ao carregar mais atividades:', error);
            }
        }
        
        // Utility functions
        function isLoggedIn() {
            const userData = localStorage.getItem('portal-user');
            if (userData) {
                try {
                    const user = JSON.parse(userData);
                    return user && user.token;
                } catch (error) {
                    console.error('Erro ao verificar login:', error);
                    return false;
                }
            }
            return false;
        }
        
        function getAuthToken() {
            const userData = localStorage.getItem('portal-user');
            if (userData) {
                try {
                    const user = JSON.parse(userData);
                    return user.token;
                } catch (error) {
                    console.error('Erro ao obter token:', error);
                    return null;
                }
            }
            return null;
        }
        
        function logout() {
            localStorage.removeItem('portal-user');
            window.location.href = '/login.html?logout=1';
        }
        
        function showSuccess(message) {
            // Implementation depends on your notification system
            alert(message);
        }
        
        function showError(message) {
            // Implementation depends on your notification system
            alert(message);
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        // Current date display
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('pt-BR', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // Scroll to top functionality
        const scrollToTopBtn = document.getElementById('scroll-to-top');
        
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.add('show');
            } else {
                scrollToTopBtn.classList.remove('show');
            }
        });
        
        scrollToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
</body>
</html>